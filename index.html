<html>
	<head>
		<link rel="stylesheet" type="text/css" href="/index.css">
		<script src = "https://ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular.min.js"></script>
		<script src = "https://ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular-animate.js"></script>
		<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>-->
		<script src = "/main.js"></script>
		<script src = "/personalDetails.js"></script>
		<script src = "/diagnosisDetails.js"></script>
		<script src = "/summary.js"></script>
	</head>
	<body ng-app="addPatient" class="ng-scope">
		<div id = "main_content">
			<div id = "personalDetails_main" ng-class="{opaque: !isPDActive}" class = "border_main_panel" ng-controller = "personalDetails as pd">
				<label id = "personalDetails_label" class = "header_label">Personal Details: </label>
				<div id = "personalDetails_form" ng-if="isPDActive" class ="container">
					<span>
						<label>Date: </label><input type="text" ng-model="model.date"/>
						<label>Patient UID: </label><input type="text" ng-model="model.UID" disabled/>
					</span>
					<span>
						<label>First Name: </label><input type="text" ng-model="model.firstName"/>
						<label>Last Name: </label><input type="text" ng-model="model.lastName"/>
					</span>
					<span>
						<label>Phone Number: </label><input type="text" ng-model="model.phoneNumber"/>
						<label>Age: </label><input class="small-input" type="text" ng-model="model.age"/>
						<label>Sex: </label><input class="small-input" type="text" ng-model="model.sex"/>
					</span>
					<span>
						<label>Address Line 1: </label><input type="text" ng-model="model.addressLine1"/>
					</span>
					<span>
						<label>Address Line 2: </label><input type="text" ng-model="model.addressLine2"/>
					</span>
					<span>
						<label>City: </label><input type="text" ng-model="model.city"/>
						<label>State: </label><input type="text" ng-model="model.state"/>
						<label>Pin Code: </label><input type="text" ng-model="model.pincode"/>
					</span>
					<button id="personalDetails_submit" class="submit_button" submitpdbutton>Submit</button>
				</div>
			</div>
			<div id = "diagnosisDetails_main" ng-class="{opaque: !isDDActive}" class="border_main_panel" ng-controller = "diagnosisDetails as dd">
				<label id = "diagnosisDetails_label" class = "header_label">Diagnosis Details: </label>
				<div id = "diagnosisDetails_form" ng-if="isDDActive" class="container">
					<span>
						<label>Primary Diagnosis: </label><input type="text" ng-model="model.primaryDiagnosis"/>
					</span>
					<span>
						<label>Symptoms: </label><textarea ng-model="model.symptoms"></textarea>
					</span>
					<span>
						<label>Examinations: </label><textarea ng-model="model.examinations"></textarea>
					</span>
					<span>
						<label>Applied Procedures: </label><textarea ng-model="model.appliedProcedures"></textarea>
					</span>
					<span>
						<label>Medications Assigned: </label>
						<div id="medicationsFieldContainer" count={{model.medicationCount}}>
							<medicationsfield class="ng-scope" id="field_1" ng-repeat="medication in model.medications"></medicationsfield>
						</div>
					</span>
					<button id="diagnosisDetails_submit" class="submit_button" submitddbutton>Submit</button>
				</div>
			</div>
			<div id = "summary_main" ng-class="{opaque: !isSummaryActive}" class="border_main_panel" ng-controller = "summary">
				<label class ="header_label">Summary: </label>
				<div id = "summary_body" ng-if="isSummaryActive">
					<div id ="summary_body_personalDetails">
						<label class ="header_label">Personal Details: </label>
						<div class="container">
							<span>
								<label>Date: {{personalDetails.date}}</label>
								<label>Patient UID: {{personalDetails.uid}}</label></span>
							<span>
								<label>First Name: {{personalDetails.firstName}}</label>
								<label>Last Name: {{personalDetails.lastName}}</label></span>
							<span>
								<label>Phone Number: {{personalDetails.phoneNumber}}</label>
								<label class="small-input">Age: {{personalDetails.age}}</label>
								<label class="small-input">Sex: {{personalDetails.sex}}</label></span>
							<span>
								<label>Address Line 1: {{personalDetails.addressLine1}}</label></span>
							<span>
								<label>Address Line 2: {{personalDetails.addressLine2}}</label></span>
							<span>
								<label>City: {{personalDetails.city}}</label>
								<label>State: {{personalDetails.state}}</label>
								<label>Pin Code: {{personalDetails.pincode}}</label>
							</span>
						</div>
					</div>
					<div id = "summary_body_diagnosisDetails">
						<label class ="header_label">Diagnosis Details: </label>
						<div id = "diagnoses_main" diagnosis-count="{{diagnosisDetails.count}}">
							<table class ="summary_table">
								<colgroup>
									<col width = "5%"><col width = "5%">
									<col width = "5%"><col width = "5%">
									<col width = "5%"><col width = "5%">
									<col width = "5%"><col width = "5%">
									<col width = "5%"><col width = "5%">
									<col width = "5%"><col width = "5%">
									<col width = "5%"><col width = "5%">
									<col width = "5%"><col width = "5%">
									<col width = "5%"><col width = "5%">
									<col width = "5%"><col width = "5%">
								</colgroup>
								<tr class = "summary_table_rows" ng-click="diagnosis.isExpanded = !diagnosis.isExpanded" ng-repeat-start="(index, diagnosis) in diagnosisDetails.diagnoses">
									<td colspan='1' class="summary_table_header clickable">{{index+1}}.</td>
									<td colspan='18' class="summary_table_main_cell clickable"> {{diagnosis.primaryDiagnosis}}</td>
									<td ng-if="!diagnosis.isExpanded" colspan="1" class ="summary_table_main_cell clickable">+</td>
									<td ng-if="diagnosis.isExpanded" colspan="1" class ="summary_table_main_cell clickable">-</td>
								</tr>
								<tr ng-if="diagnosis.isExpanded" class = "summary_table_detail_rows">
									<th colspan='5' class ="summary_table_detail_header">Symptoms:</th>
									<td colspan='15' class="summary_table_detail_cell">{{diagnosis.symptoms}}</td>
								</tr>
								<tr ng-if="diagnosis.isExpanded" class = "summary_table_detail_rows">
									<th colspan='5' class ="summary_table_detail_header">Examinations:</th>
									<td colspan='15' class="summary_table_detail_cell">{{diagnosis.examinations}}</td>
								</tr>
								<tr ng-if="diagnosis.isExpanded" class = "summary_table_detail_rows">
									<th colspan='5' class ="summary_table_detail_header">Applied Procedures:</th>
									<td colspan='15' class="summary_table_detail_cell">{{diagnosis.appliedProcedures}}</td>
								</tr>
								<tr ng-if="diagnosis.isExpanded" class = "summary_table_detail_rows" ng-repeat-end="">
									<th colspan='5' class ="summary_table_detail_header">Medications</th>
									<td colspan='15' class="summary_table_detail_cell">{{diagnosis.medications[0].name}}</td>
								</tr>
								<tr class = "summary_table_rows">
									<th colspan='20' class =""><button id="addDiagnosis" class ="summary_table_add_button dashed_gray_button" adddiagnosis>Click here to add another diagnosis</button></th>
								</tr>
							</table>
						</div>
					</div>
				</div>
			</div>
		<div id = "overlay_content" class="popup hidden">
			<div id = "addDiagnosisPrompt" class="border_main_panel">
				<label class = "header_label">Add Diagnosis?</label>
				<span class = "prompt_message">Do you wish to add another Diagnosis?</span>
			</div>
		</div>
	</body>
</html>